<!-- Add/Edit Section Modal -->
<div id="sectionModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-6">
            <div class="flex items-center justify-between">
                <h2 class="text-2xl font-bold">
                    <i class="fas fa-layer-group mr-2"></i>
                    <span id="sectionModalTitle">Add New Section</span>
                </h2>
                <button onclick="closeSectionModal()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
        </div>
        <form method="POST" action="{{ route('shelter-management.store-section') }}" class="p-6 space-y-4" id="sectionForm">
            @csrf
            <input type="hidden" name="_method" value="POST" id="sectionFormMethod">
            <input type="hidden" name="section_id" id="sectionId">

            <div>
                <label class="block text-gray-800 font-semibold mb-2">
                    Section Name <span class="text-red-600">*</span>
                </label>
                <input type="text" name="name" id="sectionName" class="w-full border-gray-300 rounded-lg shadow-sm px-4 py-3 border focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition" placeholder="e.g., Building A, Wing B" required>
            </div>

            <div>
                <label class="block text-gray-800 font-semibold mb-2">
                    Description <span class="text-red-600">*</span>
                </label>
                <textarea name="description" id="sectionDescription"
                          class="w-full border-gray-300 rounded-lg shadow-sm px-4 py-3 border focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition"
                          rows="3"
                          placeholder="e.g., Located in Building A, used for recovering animals."
                          required></textarea>
            </div>

            <div class="flex justify-end gap-3 pt-4">
                <button type="button" onclick="closeSectionModal()" id="sectionCancelBtn" class="px-6 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition duration-300">
                    Cancel
                </button>
                <button type="submit" id="sectionSubmitBtn" class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-lg hover:from-indigo-600 hover:to-purple-700 transition duration-300 flex items-center gap-2">
                    <i class="fas fa-save" id="sectionSubmitIcon"></i>
                    <span id="sectionSubmitButtonText">Add Section</span>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Add/Edit Slot Modal -->
<div id="slotModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-6">
            <div class="flex items-center justify-between">
                <h2 class="text-2xl font-bold">
                    <i class="fas fa-door-open mr-2"></i>
                    <span id="slotModalTitle">Add New Slot</span>
                </h2>
                <button onclick="closeSlotModal()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
        </div>
        <form method="POST" action="{{ route('shelter-management.store-slot') }}" class="p-6 space-y-4" id="slotForm">
            @csrf
            <input type="hidden" name="_method" value="POST" id="slotFormMethod">
            <input type="hidden" name="slot_id" id="slotId">

            <div>
                <label class="block text-gray-800 font-semibold mb-2">
                    Slot Name <span class="text-red-600">*</span>
                </label>
                <input type="text" name="name" id="slotName" class="w-full border-gray-300 rounded-lg shadow-sm px-4 py-3 border focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition" placeholder="e.g., Slot A1, Kennel 1" required>
            </div>

            <div>
                <label class="block text-gray-800 font-semibold mb-2">
                    Section <span class="text-red-600">*</span>
                </label>
                <select name="sectionID" id="slotSection" class="w-full border-gray-300 rounded-lg shadow-sm px-4 py-3 border bg-white focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition" required>
                    <option value="">Select a section</option>
                    @foreach($sections as $section)
                        <option value="{{ $section->id }}">{{ $section->name }}</option>
                    @endforeach
                </select>
                <p class="text-sm text-gray-500 mt-1">
                    <i class="fas fa-info-circle mr-1"></i>
                    If section doesn't exist, <a href="javascript:void(0)" onclick="closeSlotModal(); openSectionModal();" class="text-indigo-600 hover:text-indigo-800 font-semibold">create one first</a>
                </p>
            </div>

            <div>
                <label class="block text-gray-800 font-semibold mb-2">
                    Capacity <span class="text-red-600">*</span>
                </label>
                <input type="number" name="capacity" id="slotCapacity" min="1" class="w-full border-gray-300 rounded-lg shadow-sm px-4 py-3 border focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition" placeholder="Maximum number of animals" required>
            </div>

            <div id="slotStatusField" class="hidden">
                <label class="block text-gray-800 font-semibold mb-2">
                    Status <span class="text-red-600">*</span>
                </label>
                <select name="status" id="slotStatus" class="w-full border-gray-300 rounded-lg shadow-sm px-4 py-3 border bg-white focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition">
                    <option value="available">Available</option>
                    <option value="occupied">Occupied</option>
                    <option value="maintenance">Under Maintenance</option>
                </select>
            </div>

            <div class="flex justify-end gap-3 pt-4">
                <button type="button" onclick="closeSlotModal()" id="slotCancelBtn" class="px-6 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition duration-300">
                    Cancel
                </button>
                <button type="submit" id="slotSubmitBtn" class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-lg hover:from-indigo-600 hover:to-purple-700 transition duration-300 flex items-center gap-2">
                    <i class="fas fa-save" id="slotSubmitIcon"></i>
                    <span id="slotSubmitButtonText">Add Slot</span>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Add/Edit Category Modal -->
<div id="categoryModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
    <div class="bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="bg-gradient-to-r from-indigo-500 to-purple-600 text-white p-6">
            <div class="flex items-center justify-between">
                <h2 class="text-2xl font-bold">
                    <i class="fas fa-tags mr-2"></i>
                    <span id="categoryModalTitle">Add New Category</span>
                </h2>
                <button onclick="closeCategoryModal()" class="text-white hover:text-gray-200">
                    <i class="fas fa-times text-2xl"></i>
                </button>
            </div>
        </div>
        <form method="POST" action="{{ route('shelter-management.store-category') }}" class="p-6 space-y-4" id="categoryForm">
            @csrf
            <input type="hidden" name="_method" value="POST" id="categoryFormMethod">
            <input type="hidden" name="category_id" id="categoryId">

            <div>
                <label class="block text-gray-800 font-semibold mb-2">
                    Main Category <span class="text-red-600">*</span>
                </label>
                <input type="text" name="main" id="categoryMain" class="w-full border-gray-300 rounded-lg shadow-sm px-4 py-3 border focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition" placeholder="e.g., Food, Medical Supplies" required>
            </div>

            <div>
                <label class="block text-gray-800 font-semibold mb-2">
                    Sub Category <span class="text-red-600">*</span>
                </label>
                <input type="text" name="sub" id="categorySub" class="w-full border-gray-300 rounded-lg shadow-sm px-4 py-3 border focus:border-indigo-500 focus:ring focus:ring-indigo-200 transition" placeholder="e.g., Dry Food, Wet Food" required>
            </div>

            <div class="flex justify-end gap-3 pt-4">
                <button type="button" onclick="closeCategoryModal()" id="categoryCancelBtn" class="px-6 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 transition duration-300">
                    Cancel
                </button>
                <button type="submit" id="categorySubmitBtn" class="px-6 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-semibold rounded-lg hover:from-indigo-600 hover:to-purple-700 transition duration-300 flex items-center gap-2">
                    <i class="fas fa-save" id="categorySubmitIcon"></i>
                    <span id="categorySubmitButtonText">Add Category</span>
                </button>
            </div>
        </form>
    </div>
</div>

@include('shelter-management.slot-detail-modal')
@include('shelter-management.inventory-create-modal', ['categories' => $categories])
@include('shelter-management.inventory-detail-modal', ['categories' => $categories])
@include('shelter-management.animal-detail-modal')

    <script>
        // ==================== VIEW SWITCHING FUNCTIONS ====================
        let currentView = 'slots'; // Default view

        function switchView(view) {
            currentView = view;

            // Update tabs
            document.querySelectorAll('.view-tab').forEach(tab => {
                tab.classList.remove('bg-gradient-to-r', 'from-purple-500', 'to-purple-600', 'text-white', 'shadow-md');
                tab.classList.add('text-gray-600', 'hover:bg-gray-100');
            });

            // Highlight active tab
            const activeTab = document.getElementById(view + 'Tab');
            activeTab.classList.remove('text-gray-600', 'hover:bg-gray-100');
            activeTab.classList.add('bg-gradient-to-r', 'from-purple-500', 'to-purple-600', 'text-white', 'shadow-md');

            // Hide all content sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });

            // Hide all stats sections
            document.querySelectorAll('.stats-section').forEach(section => {
                section.classList.add('hidden');
            });

            // Hide all filter sections
            document.querySelectorAll('.search-filter-section').forEach(section => {
                section.classList.add('hidden');
            });

            // Hide all action buttons
            document.querySelectorAll('.action-btn').forEach(btn => {
                btn.classList.add('hidden');
            });

            // Show active content, stats, filters, and button
            document.getElementById(view + 'Content').classList.remove('hidden');
            document.getElementById(view + 'Stats').classList.remove('hidden');
            document.getElementById(view + 'Filters').classList.remove('hidden');
            document.getElementById('add' + view.charAt(0).toUpperCase() + view.slice(1, -1) + 'Btn').classList.remove('hidden');

            // Clear filters when switching views
            clearFilters();
        }

        // ==================== FILTER FUNCTIONS ====================
        function filterSlots() {
            const searchTerm = document.getElementById('searchSlotsInput').value.toLowerCase();
            const statusFilter = document.getElementById('statusFilter').value.toLowerCase();
            const sectionFilter = document.getElementById('sectionFilter').value;

            const rows = document.querySelectorAll('.slot-row');
            let visibleCount = 0;

            rows.forEach(row => {
                const slotName = row.getAttribute('data-slot-name') || '';
                const slotStatus = row.getAttribute('data-slot-status') || '';
                const slotSection = row.getAttribute('data-slot-section') || '';

                const matchesSearch = slotName.includes(searchTerm);
                const matchesStatus = !statusFilter || slotStatus === statusFilter;
                const matchesSection = !sectionFilter || slotSection === sectionFilter;

                if (matchesSearch && matchesStatus && matchesSection) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            updateResultsCount('slots', visibleCount, rows.length);
        }

        function filterSections() {
            const searchTerm = document.getElementById('searchSectionsInput').value.toLowerCase();
            const rows = document.querySelectorAll('.section-row');
            let visibleCount = 0;

            rows.forEach(row => {
                const sectionName = row.getAttribute('data-section-name') || '';
                const matchesSearch = sectionName.includes(searchTerm);

                if (matchesSearch) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            updateResultsCount('sections', visibleCount, rows.length);
        }

        function filterCategories() {
            const searchTerm = document.getElementById('searchCategoriesInput').value.toLowerCase();
            const rows = document.querySelectorAll('.category-row');
            let visibleCount = 0;

            rows.forEach(row => {
                const categoryMain = row.getAttribute('data-category-main') || '';
                const categorySub = row.getAttribute('data-category-sub') || '';
                const matchesSearch = categoryMain.includes(searchTerm) || categorySub.includes(searchTerm);

                if (matchesSearch) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            updateResultsCount('categories', visibleCount, rows.length);
        }

        function clearFilters() {
            // Clear all search inputs
            const searchInputs = ['searchSlotsInput', 'searchSectionsInput', 'searchCategoriesInput'];
            searchInputs.forEach(id => {
                const input = document.getElementById(id);
                if (input) input.value = '';
            });

            // Clear slot-specific filters
            const statusFilter = document.getElementById('statusFilter');
            const sectionFilter = document.getElementById('sectionFilter');
            if (statusFilter) statusFilter.value = '';
            if (sectionFilter) sectionFilter.value = '';

            // Trigger appropriate filter
            if (currentView === 'slots') filterSlots();
            else if (currentView === 'sections') filterSections();
            else if (currentView === 'categories') filterCategories();
        }

        function updateResultsCount(view, visible, total) {
            const resultsDiv = document.getElementById(view + 'ResultsCount');
            if (!resultsDiv) return;

            const viewLabels = {
                'slots': 'slot',
                'sections': 'section',
                'categories': 'categor'
            };
            const label = viewLabels[view];
            const pluralLabel = label + (label.endsWith('r') ? 'ies' : 's');

            if (visible === total) {
                resultsDiv.innerHTML = `<i class="fas fa-check-circle text-green-600 mr-1"></i>Showing all <strong>${total}</strong> ${total === 1 ? label : pluralLabel}`;
            } else {
                resultsDiv.innerHTML = `<i class="fas fa-filter text-purple-600 mr-1"></i>Showing <strong>${visible}</strong> of <strong>${total}</strong> ${pluralLabel}`;
            }
        }

        // Initialize results counts on page load
        document.addEventListener('DOMContentLoaded', function() {
            const slotsCount = document.querySelectorAll('.slot-row').length;
            const sectionsCount = document.querySelectorAll('.section-row').length;
            const categoriesCount = document.querySelectorAll('.category-row').length;

            updateResultsCount('slots', slotsCount, slotsCount);
            updateResultsCount('sections', sectionsCount, sectionsCount);
            updateResultsCount('categories', categoriesCount, categoriesCount);
        });

        // Section Modal Functions
        function openSectionModal() {
            document.getElementById('sectionModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            document.getElementById('sectionForm').reset();
            document.getElementById('sectionModalTitle').textContent = 'Add New Section';
            document.getElementById('sectionSubmitButtonText').textContent = 'Add Section';
            document.getElementById('sectionFormMethod').value = 'POST';
            document.getElementById('sectionId').value = '';
            document.getElementById('sectionForm').action = '{{ route("shelter-management.store-section") }}';
        }

        function closeSectionModal() {
            document.getElementById('sectionModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function editSection(sectionId) {
            document.getElementById('sectionModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            document.getElementById('sectionModalTitle').textContent = 'Edit Section';
            document.getElementById('sectionSubmitButtonText').textContent = 'Update Section';
            document.getElementById('sectionFormMethod').value = 'PUT';
            document.getElementById('sectionId').value = sectionId;
            document.getElementById('sectionForm').action = '/shelter-management/sections/' + sectionId;

            fetch(`/shelter-management/sections/${sectionId}/edit`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('sectionName').value = data.name;
                    document.getElementById('sectionDescription').value = data.description;
                })
                .catch(error => {
                    console.error('Error fetching section data:', error);
                    alert('Failed to load section data. Please try again.');
                    closeSectionModal();
                });
        }

        function deleteSection(sectionId) {
            if (confirm('Are you sure you want to delete this section?')) {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/shelter-management/sections/' + sectionId;

                const csrfToken = document.querySelector('meta[name="csrf-token"]');
                if (csrfToken) {
                    const csrfInput = document.createElement('input');
                    csrfInput.type = 'hidden';
                    csrfInput.name = '_token';
                    csrfInput.value = csrfToken.content;
                    form.appendChild(csrfInput);
                }

                const methodInput = document.createElement('input');
                methodInput.type = 'hidden';
                methodInput.name = '_method';
                methodInput.value = 'DELETE';
                form.appendChild(methodInput);

                document.body.appendChild(form);
                form.submit();
            }
        }

        // ==================== SLOT MODAL FUNCTIONS ====================
        function openSlotModal() {
            document.getElementById('slotModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';

            // Reset form for adding new slot
            document.getElementById('slotForm').reset();
            document.getElementById('slotModalTitle').textContent = 'Add New Slot';
            document.getElementById('slotSubmitButtonText').textContent = 'Add Slot';
            document.getElementById('slotFormMethod').value = 'POST';
            document.getElementById('slotId').value = '';

            // Reset form action to store route
            document.getElementById('slotForm').action = '{{ route("shelter-management.store-slot") }}';

            // Hide status field for add mode
            document.getElementById('slotStatusField').classList.add('hidden');
            document.getElementById('slotStatus').removeAttribute('required');
        }

        function editSlot(slotId) {
            // Open modal in edit mode
            document.getElementById('slotModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';

            document.getElementById('slotModalTitle').textContent = 'Edit Slot';
            document.getElementById('slotSubmitButtonText').textContent = 'Update Slot';
            document.getElementById('slotFormMethod').value = 'PUT';
            document.getElementById('slotId').value = slotId;

            // Show status field for edit mode
            document.getElementById('slotStatusField').classList.remove('hidden');
            document.getElementById('slotStatus').setAttribute('required', 'required');

            // Update form action - changed to match new route
            document.getElementById('slotForm').action = '/shelter-management/slots/' + slotId;

            // Fetch slot data via AJAX - changed to match new route
            fetch(`/shelter-management/slots/${slotId}/edit`)
                .then(response => response.json())
                .then(data => {
                    // Populate form fields
                    document.getElementById('slotName').value = data.name;
                    document.getElementById('slotSection').value = data.sectionID;
                    document.getElementById('slotCapacity').value = data.capacity;
                    document.getElementById('slotStatus').value = data.status;
                })
                .catch(error => {
                    console.error('Error fetching slot data:', error);
                    alert('Failed to load slot data. Please try again.');
                    closeSlotModal();
                });
        }

        function deleteSlot(slotId) {
            if (confirm('Are you sure you want to delete this slot? This action cannot be undone.')) {
                // Create a form and submit it
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/shelter-management/slots/' + slotId;

                // Add CSRF token - Get fresh token from meta tag
                const csrfToken = document.querySelector('meta[name="csrf-token"]');
                if (csrfToken) {
                    const csrfInput = document.createElement('input');
                    csrfInput.type = 'hidden';
                    csrfInput.name = '_token';
                    csrfInput.value = csrfToken.getAttribute('content'); // Use getAttribute
                    form.appendChild(csrfInput);
                } else {
                    // Fallback: try to get from any existing form
                    const existingToken = document.querySelector('input[name="_token"]');
                    if (existingToken) {
                        const csrfInput = document.createElement('input');
                        csrfInput.type = 'hidden';
                        csrfInput.name = '_token';
                        csrfInput.value = existingToken.value;
                        form.appendChild(csrfInput);
                    } else {
                        alert('Security token not found. Please refresh the page and try again.');
                        return;
                    }
                }

                // Add DELETE method
                const methodInput = document.createElement('input');
                methodInput.type = 'hidden';
                methodInput.name = '_method';
                methodInput.value = 'DELETE';
                form.appendChild(methodInput);

                document.body.appendChild(form);
                form.submit();
            }
        }

        // Category Modal Functions
        function openCategoryModal() {
            document.getElementById('categoryModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            document.getElementById('categoryForm').reset();
            document.getElementById('categoryModalTitle').textContent = 'Add New Category';
            document.getElementById('categorySubmitButtonText').textContent = 'Add Category';
            document.getElementById('categoryFormMethod').value = 'POST';
            document.getElementById('categoryId').value = '';
            document.getElementById('categoryForm').action = '{{ route("shelter-management.store-category") }}';
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function editCategory(categoryId) {
            document.getElementById('categoryModal').classList.remove('hidden');
            document.body.style.overflow = 'hidden';
            document.getElementById('categoryModalTitle').textContent = 'Edit Category';
            document.getElementById('categorySubmitButtonText').textContent = 'Update Category';
            document.getElementById('categoryFormMethod').value = 'PUT';
            document.getElementById('categoryId').value = categoryId;
            document.getElementById('categoryForm').action = '/shelter-management/categories/' + categoryId;

            fetch(`/shelter-management/categories/${categoryId}/edit`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById('categoryMain').value = data.main;
                    document.getElementById('categorySub').value = data.sub;
                })
                .catch(error => {
                    console.error('Error fetching category data:', error);
                    alert('Failed to load category data. Please try again.');
                    closeCategoryModal();
                });
        }

        function deleteCategory(categoryId) {
            if (confirm('Are you sure you want to delete this category?')) {
                const form = document.createElement('form');
                form.method = 'POST';
                form.action = '/shelter-management/categories/' + categoryId;

                const csrfToken = document.querySelector('meta[name="csrf-token"]');
                if (csrfToken) {
                    const csrfInput = document.createElement('input');
                    csrfInput.type = 'hidden';
                    csrfInput.name = '_token';
                    csrfInput.value = csrfToken.content;
                    form.appendChild(csrfInput);
                }

                const methodInput = document.createElement('input');
                methodInput.type = 'hidden';
                methodInput.name = '_method';
                methodInput.value = 'DELETE';
                form.appendChild(methodInput);

                document.body.appendChild(form);
                form.submit();
            }
        }

        // Close modals when clicking outside
        document.getElementById('sectionModal')?.addEventListener('click', function(e) {
            if (e.target === this) closeSectionModal();
        });

        document.getElementById('categoryModal')?.addEventListener('click', function(e) {
            if (e.target === this) closeCategoryModal();
        });

        // Close modals with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeSectionModal();
                closeCategoryModal();
                closeSlotModal();
            }
        });

        // Close modal when clicking outside
        document.getElementById('slotModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeSlotModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeSlotModal();
            }
        });

        function closeSlotModal() {
            document.getElementById('slotModal').classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        // ==================== FORM SUBMISSION LOADING STATES ====================

        // Section Form Submission
        document.getElementById('sectionForm').addEventListener('submit', function(e) {
            const submitBtn = document.getElementById('sectionSubmitBtn');
            const submitIcon = document.getElementById('sectionSubmitIcon');
            const submitText = document.getElementById('sectionSubmitButtonText');
            const cancelBtn = document.getElementById('sectionCancelBtn');

            // Disable buttons
            submitBtn.disabled = true;
            cancelBtn.disabled = true;

            // Change icon to spinner
            submitIcon.className = 'fas fa-spinner fa-spin';

            // Update text based on mode (Add or Update)
            const isUpdate = document.getElementById('sectionFormMethod').value === 'PUT';
            submitText.textContent = isUpdate ? 'Updating...' : 'Adding...';

            // Allow form to submit
            return true;
        });

        // Slot Form Submission
        document.getElementById('slotForm').addEventListener('submit', function(e) {
            const submitBtn = document.getElementById('slotSubmitBtn');
            const submitIcon = document.getElementById('slotSubmitIcon');
            const submitText = document.getElementById('slotSubmitButtonText');
            const cancelBtn = document.getElementById('slotCancelBtn');

            // Disable buttons
            submitBtn.disabled = true;
            cancelBtn.disabled = true;

            // Change icon to spinner
            submitIcon.className = 'fas fa-spinner fa-spin';

            // Update text based on mode (Add or Update)
            const isUpdate = document.getElementById('slotFormMethod').value === 'PUT';
            submitText.textContent = isUpdate ? 'Updating...' : 'Adding...';

            // Allow form to submit
            return true;
        });

        // Category Form Submission
        document.getElementById('categoryForm').addEventListener('submit', function(e) {
            const submitBtn = document.getElementById('categorySubmitBtn');
            const submitIcon = document.getElementById('categorySubmitIcon');
            const submitText = document.getElementById('categorySubmitButtonText');
            const cancelBtn = document.getElementById('categoryCancelBtn');

            // Disable buttons
            submitBtn.disabled = true;
            cancelBtn.disabled = true;

            // Change icon to spinner
            submitIcon.className = 'fas fa-spinner fa-spin';

            // Update text based on mode (Add or Update)
            const isUpdate = document.getElementById('categoryFormMethod').value === 'PUT';
            submitText.textContent = isUpdate ? 'Updating...' : 'Adding...';

            // Allow form to submit
            return true;
        });
    </script>

    <style>
        /* Spinner animation for FontAwesome */
        .fa-spin {
            animation: fa-spin 1s infinite linear;
        }

        @keyframes fa-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</body>
</html>
